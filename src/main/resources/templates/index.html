<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
	  layout:decorate="~{ layout/layout.html }">

	<head>
        <title>오이마켓 | CUCUMBER MARKET</title>
		<link rel="stylesheet" th:href="@{/css/index.css}">
    </head>


	<div layout:fragment="content">
		<!--slide-->
		<div id="slide">
			<div id="slideWrap">
				<div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="false">
					<div class="carousel-indicators">
						<button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
						<button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
						<button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
					</div>
					<div class="carousel-inner">
						<div class="carousel-item active">
							<img th:src="@{/images/}" class="d-block" alt="Slide 1">
							<div class="carousel-caption d-none d-md-block">
								<h5>First slide label</h5>
								<p>Some representative placeholder content for the first slide.</p>
							</div>
						</div>
						<div class="carousel-item">
							<img th:src="@{/images/}" class="d-block" alt="Slide 2">
							<div class="carousel-caption d-none d-md-block">
								<h5>Second slide label</h5>
								<p>Some representative placeholder content for the second slide.</p>
							</div>
						</div>
						<div class="carousel-item">
							<img th:src="@{/images/}" class="d-block" alt="Slide 3">
							<div class="carousel-caption d-none d-md-block">
								<h5>Third slide label</h5>
								<p>Some representative placeholder content for the third slide.</p>
							</div>
						</div>
					</div>
					<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
						<span class="carousel-control-prev-icon" aria-hidden="true"></span>
						<span class="visually-hidden">Previous</span>
					</button>
					<button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
						<span class="carousel-control-next-icon" aria-hidden="true"></span>
						<span class="visually-hidden">Next</span>
					</button>
				  </div>
			</div>
		</div><!--end.slide-->

		<!--productSection-->
		<div id="productSection">
			<div id="productSectionWrap" class="container">

				<!--isAnonymous-->
				<th:block sec:authorize="isAnonymous()">
					
					<div id="popularProduct" class="sectionTitle">
						<h1>중고거래 인기매물</h1>
						<h4>오이마켓 회원이 되어 가깝고 따뜻한 거래를 경험해보세요.</h4>
					</div>

					<div id="popularProductList" class="productList">
						<!--row-->
						<div class="row row-cols-4">
							<!--product-->
							<div th:each="product: ${ productList }" class="product col card">
							<a th:href="@{/login}">
								<!--productImg-->
								<div class="productImg card-img-top">
									<!-- 이미지가 없다면 -->
									<th:block th:if="${ product.photoUrl1 }== null and ${ product.photoUrl2 }== null and 
									${ product.photoUrl3 }== null and ${ product.photoUrl4 }== null and ${ product.photoUrl5 }== null">
										<img th:src="@{ /images/product/noimg.png }" style="border: 1px solid #aaa" alt="...">
									</th:block>
									<!-- 이미지가 있다면-->
									<th:block th:if="${product.photoUrl1} != null">
										<img th:src="@{ ${product.photoUrl1} }" alt="...">
									</th:block>
								</div>
								<!--productInfo-->
								<div class="productInfo card-body">
									<p th:text="${ product.title }" class="productTitle card-title">
										<!--productTitle-->
									</p>
									<p th:text="${ product.price }+'원'" class="productPrice card-title">
										<!--productPrice-->
									</p>
									<p th:text="${ product.member.address }" class="productAdd card-title">
										<!--productAddress-->
									</p>
									<p th:text="'찜 '+${ product.likeCount}" class="productLike card-text">
										<!--productLike-->
									</p>
								</div>
							</a>
							</div><!--end.product-->
						</div><!--end.row-->
					</div>
					
					<!--btnMorePopularProduct-->
					<div class="btnMore">
						<a th:href="@{ /product/list }">
							<div id="btnMorePopularProduct" class="btn btn-outline-success">인기매물 더 보기 <span><i class="bi bi-arrow-right"></i></span></div>
						</a>	
					</div>
				</th:block><!--end.isAnonymous-->

				<!--isAuthenticated-->
				<th:block sec:authorize="isAuthenticated()">
						
					<div id="areaPopularProduct" class="sectionTitle">
						<h1>우리 동네 중고 직거래 마켓</h1>
						<h4><span sec:authentication="name"></span>님의 동네 주민들과
							가깝고 따뜻한 거래를 지금 경험해보세요.</h4>
					</div>

					<div id="areaPopularProductList" class="productList">
						<!--row-->
						<div class="row row-cols-4">
							<!--product-->
							<div th:each="product: ${ productList }" class="product col card">
							<a th:href="@{product/detail(productNo=${product.productNo})}">
								<!--productImg-->
								<div class="productImg card-img-top">
									<!-- 이미지가 없다면 -->
									<th:block th:if="${ product.photoUrl1 }== null and ${ product.photoUrl2 }== null and 
									${ product.photoUrl3 }== null and ${ product.photoUrl4 }== null and ${ product.photoUrl5 }== null">
										<img th:src="@{ /images/product/noimg.png }" style="border: 1px solid #aaa" alt="...">
									</th:block>
									<!-- 이미지가 있다면-->
									<th:block th:if="${product.photoUrl1} != null">
										<img th:src="@{ ${product.photoUrl1} }" alt="...">
									</th:block>
								</div>
								<!--productInfo-->
								<div class="productInfo card-body">
									<p th:text="${ product.title }" class="productTitle card-title">
										<!--productTitle-->
									</p>
									<p th:text="${ product.price }+'원'" class="productPrice card-title">
										<!--productPrice-->
									</p>
									<p th:text="${ product.member.address }" class="productAdd card-title">
										<!--productAddress-->
									</p>
									<p th:text="'찜 '+${ product.likeCount}" class="productLike card-text">
										<!--productLike-->
									</p>
								</div>
							</a>
							</div><!--end.product-->
						</div><!--end.row-->
					</div>
					
					<!--btnMorePopularProduct-->
					<div class="btnMore">
						<a th:href="@{ /product/list }">
							<div id="btnMoreAreaPopularProduct" class="btn btn-outline-success">인기매물 더 보기 <span><i class="bi bi-arrow-right"></i></span></div>
						</a>	
					</div>

				</th:block><!--end.isAuthenticated-->
			</div>
		</div><!--end.productSection-->

		<!--bannerSection-->
		<div id="bannerSection">
			<div id="bannerSectionWrap" class="container">

			</div>
		</div><!--end.bannerSection-->

		<!--postSection-->
		<div id="postSection">
			<div id="postSectionWrap" class="container">

				<!--isAnonymous-->
				<th:block sec:authorize="isAnonymous()">
					
					<div id="popularPost" class="sectionTitle">
						<h1>이웃과 함께 하는 동네 생활</h1>
						<h4>오이마켓 회원이 되어 우리 동네의 다양한 이야기를 나누어요.</h4>
					</div>

					<div id="popularPostList" class="postList">
						<!--row-->
						<div class="row row-cols-2">
							<!--post-->
							<div th:each="post: ${ postList }" class="post">
							<a th:href="@{/login}" class="postA">
								<!--postImg-->
								<div class="postImg">
									<!-- 이미지가 없다면 -->
									<th:block th:if="${ post.imageUrl01 }== null">
										<img th:src="@{ /images/product/noimg.png }" style="border: 1px solid #aaa" alt="...">
									</th:block>
									<!-- 이미지가 있다면-->
									<th:block th:if="${ post.imageUrl01 } != null">
										<img th:src="@{ ${ post.imageUrl01 } }" alt="...">
									</th:block>
								</div>
								<!--postInfo-->
								<div class="postInfo card-body">
									<p th:text="${ post.title }" class="postTitle card-title">
										<!--postTitle-->제목
									</p>
									<p  th:text="${ post.member.nickname }" class="postMember card-title">
										<!--postMember-->작성자
									</p>
									<p th:text="${ post.member.nickname }" class="postDate card-title">
										<!--postDate-->작성일
									</p>
									<p th:text="${ post.clickCount }" class="postClickCount card-text">
										<!--postClickCount-->조회수
									</p>
								</div>
							</a>
							</div><!--end.post-->							
						</div><!--end.row-->
						
					</div>
					
					<!--btnMorePopularPost-->
					<div class="btnMore">
						<a th:href="@{ /product/list }">
							<div id="btnMorePopularPost" class="btn btn-outline-success">인기매물 더 보기 <span><i class="bi bi-arrow-right"></i></span></div>
						</a>	
					</div>

				</th:block><!--end.isAnonymous-->

				<!--isAuthenticated-->
				<th:block sec:authorize="isAuthenticated()">

					<div id="areaPopularPost" class="sectionTitle">
						<h1>이웃과 함께 하는 동네 생활</h1>
						<h4><span sec:authentication="name"></span>님 동네의 다양한 이야기를 이웃과 함께 나누어요.</h4>
					</div>

				</th:block>
			</div>
		</div><!--end.postSection-->


	</div>


	<!--	<script th:src="@{/js/js.js}"></script>-->
	<th:block layout:fragment="script">

	</th:block>

</html>